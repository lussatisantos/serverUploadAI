{"version":3,"file":"toad-cache.min.js","sources":["../src/FifoMap.js","../src/LruMap.js","../src/LruObject.js","../src/HitStatisticsRecord.js","../src/utils/dateUtils.js","../src/HitStatistics.js","../src/LruObjectHitStatistics.js","../src/FifoObject.js"],"sourcesContent":["export class FifoMap {\n  constructor(max = 1000, ttlInMsecs = 0) {\n    if (isNaN(max) || max < 0) {\n      throw new Error('Invalid max value')\n    }\n\n    if (isNaN(ttlInMsecs) || ttlInMsecs < 0) {\n      throw new Error('Invalid ttl value')\n    }\n\n    this.first = null\n    this.items = new Map()\n    this.last = null\n    this.max = max\n    this.ttl = ttlInMsecs\n  }\n\n  get size() {\n    return this.items.size\n  }\n\n  clear() {\n    this.items = new Map()\n    this.first = null\n    this.last = null\n  }\n\n  delete(key) {\n    if (this.items.has(key)) {\n      const deletedItem = this.items.get(key)\n\n      this.items.delete(key)\n\n      if (deletedItem.prev !== null) {\n        deletedItem.prev.next = deletedItem.next\n      }\n\n      if (deletedItem.next !== null) {\n        deletedItem.next.prev = deletedItem.prev\n      }\n\n      if (this.first === deletedItem) {\n        this.first = deletedItem.next\n      }\n\n      if (this.last === deletedItem) {\n        this.last = deletedItem.prev\n      }\n    }\n  }\n\n  evict() {\n    if (this.size > 0) {\n      const item = this.first\n\n      this.items.delete(item.key)\n\n      if (this.size === 0) {\n        this.first = null\n        this.last = null\n      } else {\n        this.first = item.next\n        this.first.prev = null\n      }\n    }\n  }\n\n  expiresAt(key) {\n    if (this.items.has(key)) {\n      return this.items.get(key).expiry\n    }\n  }\n\n  get(key) {\n    if (this.items.has(key)) {\n      const item = this.items.get(key)\n\n      if (this.ttl > 0 && item.expiry <= Date.now()) {\n        this.delete(key)\n        return\n      }\n\n      return item.value\n    }\n  }\n\n  keys() {\n    return this.items.keys()\n  }\n\n  set(key, value) {\n    // Replace existing item\n    if (this.items.has(key)) {\n      const item = this.items.get(key)\n      item.value = value\n\n      item.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl\n\n      return\n    }\n\n    // Add new item\n    if (this.max > 0 && this.size === this.max) {\n      this.evict()\n    }\n\n    const item = {\n      expiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n      key: key,\n      prev: this.last,\n      next: null,\n      value,\n    }\n    this.items.set(key, item)\n\n    if (this.size === 1) {\n      this.first = item\n    } else {\n      this.last.next = item\n    }\n\n    this.last = item\n  }\n}\n","export class LruMap {\n  constructor(max = 1000, ttlInMsecs = 0) {\n    if (isNaN(max) || max < 0) {\n      throw new Error('Invalid max value')\n    }\n\n    if (isNaN(ttlInMsecs) || ttlInMsecs < 0) {\n      throw new Error('Invalid ttl value')\n    }\n\n    this.first = null\n    this.items = new Map()\n    this.last = null\n    this.max = max\n    this.ttl = ttlInMsecs\n  }\n\n  get size() {\n    return this.items.size\n  }\n\n  bumpLru(item) {\n    const last = this.last\n    const next = item.next\n    const prev = item.prev\n\n    if (this.first === item) {\n      this.first = item.next\n    }\n\n    item.next = null\n    item.prev = this.last\n    last.next = item\n\n    if (prev !== null) {\n      prev.next = next\n    }\n\n    if (next !== null) {\n      next.prev = prev\n    }\n\n    this.last = item\n  }\n\n  clear() {\n    this.items = new Map()\n    this.first = null\n    this.last = null\n  }\n\n  delete(key) {\n    if (this.items.has(key)) {\n      const item = this.items.get(key)\n\n      this.items.delete(key)\n\n      if (item.prev !== null) {\n        item.prev.next = item.next\n      }\n\n      if (item.next !== null) {\n        item.next.prev = item.prev\n      }\n\n      if (this.first === item) {\n        this.first = item.next\n      }\n\n      if (this.last === item) {\n        this.last = item.prev\n      }\n    }\n  }\n\n  evict() {\n    if (this.size > 0) {\n      const item = this.first\n\n      this.items.delete(item.key)\n\n      if (this.size === 0) {\n        this.first = null\n        this.last = null\n      } else {\n        this.first = item.next\n        this.first.prev = null\n      }\n    }\n  }\n\n  expiresAt(key) {\n    if (this.items.has(key)) {\n      return this.items.get(key).expiry\n    }\n  }\n\n  get(key) {\n    if (this.items.has(key)) {\n      const item = this.items.get(key)\n\n      // Item has already expired\n      if (this.ttl > 0 && item.expiry <= Date.now()) {\n        this.delete(key)\n        return\n      }\n\n      // Item is still fresh\n      this.bumpLru(item)\n      return item.value\n    }\n  }\n\n  keys() {\n    return this.items.keys()\n  }\n\n  set(key, value) {\n    // Replace existing item\n    if (this.items.has(key)) {\n      const item = this.items.get(key)\n      item.value = value\n\n      item.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl\n\n      if (this.last !== item) {\n        this.bumpLru(item)\n      }\n      return\n    }\n\n    // Add new item\n    if (this.max > 0 && this.size === this.max) {\n      this.evict()\n    }\n\n    const item = {\n      expiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n      key: key,\n      prev: this.last,\n      next: null,\n      value,\n    }\n    this.items.set(key, item)\n\n    if (this.size === 1) {\n      this.first = item\n    } else {\n      this.last.next = item\n    }\n\n    this.last = item\n  }\n}\n","export class LruObject {\n  constructor(max = 1000, ttlInMsecs = 0) {\n    if (isNaN(max) || max < 0) {\n      throw new Error('Invalid max value')\n    }\n\n    if (isNaN(ttlInMsecs) || ttlInMsecs < 0) {\n      throw new Error('Invalid ttl value')\n    }\n\n    this.first = null\n    this.items = Object.create(null)\n    this.last = null\n    this.size = 0\n    this.max = max\n    this.ttl = ttlInMsecs\n  }\n\n  bumpLru(item) {\n    const last = this.last\n    const next = item.next\n    const prev = item.prev\n\n    if (this.first === item) {\n      this.first = item.next\n    }\n\n    item.next = null\n    item.prev = this.last\n    last.next = item\n\n    if (prev !== null) {\n      prev.next = next\n    }\n\n    if (next !== null) {\n      next.prev = prev\n    }\n\n    this.last = item\n  }\n\n  clear() {\n    this.items = Object.create(null)\n    this.first = null\n    this.last = null\n    this.size = 0\n  }\n\n  delete(key) {\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      const item = this.items[key]\n\n      delete this.items[key]\n      this.size--\n\n      if (item.prev !== null) {\n        item.prev.next = item.next\n      }\n\n      if (item.next !== null) {\n        item.next.prev = item.prev\n      }\n\n      if (this.first === item) {\n        this.first = item.next\n      }\n\n      if (this.last === item) {\n        this.last = item.prev\n      }\n    }\n  }\n\n  evict() {\n    if (this.size > 0) {\n      const item = this.first\n\n      delete this.items[item.key]\n\n      if (--this.size === 0) {\n        this.first = null\n        this.last = null\n      } else {\n        this.first = item.next\n        this.first.prev = null\n      }\n    }\n  }\n\n  expiresAt(key) {\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      return this.items[key].expiry\n    }\n  }\n\n  get(key) {\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      const item = this.items[key]\n\n      // Item has already expired\n      if (this.ttl > 0 && item.expiry <= Date.now()) {\n        this.delete(key)\n        return\n      }\n\n      // Item is still fresh\n      this.bumpLru(item)\n      return item.value\n    }\n  }\n\n  keys() {\n    return Object.keys(this.items)\n  }\n\n  set(key, value) {\n    // Replace existing item\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      const item = this.items[key]\n      item.value = value\n\n      item.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl\n\n      if (this.last !== item) {\n        this.bumpLru(item)\n      }\n      return\n    }\n\n    // Add new item\n    if (this.max > 0 && this.size === this.max) {\n      this.evict()\n    }\n\n    const item = {\n      expiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n      key: key,\n      prev: this.last,\n      next: null,\n      value,\n    }\n    this.items[key] = item\n\n    if (++this.size === 1) {\n      this.first = item\n    } else {\n      this.last.next = item\n    }\n\n    this.last = item\n  }\n}\n","export class HitStatisticsRecord {\n  constructor() {\n    this.records = {}\n  }\n\n  initForCache(cacheId, currentTimeStamp) {\n    this.records[cacheId] = {\n      [currentTimeStamp]: {\n        hits: 0,\n        misses: 0,\n        expirations: 0,\n      },\n    }\n  }\n\n  resetForCache(cacheId) {\n    for (let key of Object.keys(this.records[cacheId])) {\n      this.records[cacheId][key] = {\n        hits: 0,\n        misses: 0,\n        expirations: 0,\n      }\n    }\n  }\n\n  getStatistics() {\n    return this.records\n  }\n}\n","/**\n *\n * @param {Date} date\n * @returns {string}\n */\nexport function getTimestamp(date) {\n  return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date\n    .getDate()\n    .toString()\n    .padStart(2, '0')}`\n}\n","import { HitStatisticsRecord } from './HitStatisticsRecord.js'\nimport { getTimestamp } from './utils/dateUtils.js'\n\nexport class HitStatistics {\n  constructor(cacheId, statisticTtlInHours, globalStatisticsRecord) {\n    this.collectionStart = new Date()\n\n    this.lastTimeStamp = ''\n    this.currentTimeStamp = getTimestamp(this.collectionStart)\n    this.cacheId = cacheId\n    this.statisticTtlInHours = statisticTtlInHours\n\n    this.records = globalStatisticsRecord || new HitStatisticsRecord()\n    this.records.initForCache(this.cacheId, this.currentTimeStamp)\n  }\n\n  hoursPassed() {\n    return (Date.now() - this.collectionStart) / 1000 / 60 / 60\n  }\n\n  addHit() {\n    this.archiveIfNeeded()\n    this.records.records[this.cacheId][this.currentTimeStamp].hits++\n  }\n\n  addMiss() {\n    this.archiveIfNeeded()\n    this.records.records[this.cacheId][this.currentTimeStamp].misses++\n  }\n\n  addExpiration() {\n    this.archiveIfNeeded()\n    this.records.records[this.cacheId][this.currentTimeStamp].expirations++\n  }\n\n  getStatistics() {\n    return this.records.getStatistics()\n  }\n\n  archiveIfNeeded() {\n    if (this.hoursPassed() >= this.statisticTtlInHours) {\n      const now = new Date()\n      const newTimestamp = getTimestamp(now)\n\n      if (this.lastTimeStamp && this.lastTimeStamp !== newTimestamp) {\n        delete this.records.records[this.cacheId][this.lastTimeStamp]\n      }\n      this.lastTimeStamp = this.currentTimeStamp\n\n      this.collectionStart = now\n      this.currentTimeStamp = getTimestamp(this.collectionStart)\n      this.records.initForCache(this.cacheId, this.currentTimeStamp)\n    }\n  }\n}\n","import { LruObject } from './LruObject.js'\nimport { HitStatistics } from './HitStatistics.js'\n\nexport class LruObjectHitStatistics extends LruObject {\n  constructor(max, ttlInMsecs, cacheId, globalStatisticsRecord, statisticTtlInHours) {\n    super(max || 1000, ttlInMsecs || 0)\n\n    if (!cacheId) {\n      throw new Error('Cache id is mandatory')\n    }\n\n    this.hitStatistics = new HitStatistics(\n      cacheId,\n      statisticTtlInHours !== undefined ? statisticTtlInHours : 24,\n      globalStatisticsRecord\n    )\n  }\n\n  getStatistics() {\n    return this.hitStatistics.getStatistics()\n  }\n\n  get(key) {\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      const item = this.items[key]\n\n      // Item has already expired\n      if (this.ttl > 0 && item.expiry <= Date.now()) {\n        this.delete(key)\n        this.hitStatistics.addExpiration()\n        return\n      }\n\n      // Item is still fresh\n      this.bumpLru(item)\n      this.hitStatistics.addHit()\n      return item.value\n    }\n    this.hitStatistics.addMiss()\n  }\n}\n","export class FifoObject {\n  constructor(max = 1000, ttlInMsecs = 0) {\n    if (isNaN(max) || max < 0) {\n      throw new Error('Invalid max value')\n    }\n\n    if (isNaN(ttlInMsecs) || ttlInMsecs < 0) {\n      throw new Error('Invalid ttl value')\n    }\n\n    this.first = null\n    this.items = Object.create(null)\n    this.last = null\n    this.size = 0\n    this.max = max\n    this.ttl = ttlInMsecs\n  }\n\n  clear() {\n    this.items = Object.create(null)\n    this.first = null\n    this.last = null\n    this.size = 0\n  }\n\n  delete(key) {\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      const deletedItem = this.items[key]\n\n      delete this.items[key]\n      this.size--\n\n      if (deletedItem.prev !== null) {\n        deletedItem.prev.next = deletedItem.next\n      }\n\n      if (deletedItem.next !== null) {\n        deletedItem.next.prev = deletedItem.prev\n      }\n\n      if (this.first === deletedItem) {\n        this.first = deletedItem.next\n      }\n\n      if (this.last === deletedItem) {\n        this.last = deletedItem.prev\n      }\n    }\n  }\n\n  evict() {\n    if (this.size > 0) {\n      const item = this.first\n\n      delete this.items[item.key]\n\n      if (--this.size === 0) {\n        this.first = null\n        this.last = null\n      } else {\n        this.first = item.next\n        this.first.prev = null\n      }\n    }\n  }\n\n  expiresAt(key) {\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      return this.items[key].expiry\n    }\n  }\n\n  get(key) {\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      const item = this.items[key]\n\n      if (this.ttl > 0 && item.expiry <= Date.now()) {\n        this.delete(key)\n        return\n      }\n\n      return item.value\n    }\n  }\n\n  keys() {\n    return Object.keys(this.items)\n  }\n\n  set(key, value) {\n    // Replace existing item\n    if (Object.prototype.hasOwnProperty.call(this.items, key)) {\n      const item = this.items[key]\n      item.value = value\n\n      item.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl\n\n      return\n    }\n\n    // Add new item\n    if (this.max > 0 && this.size === this.max) {\n      this.evict()\n    }\n\n    const item = {\n      expiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n      key: key,\n      prev: this.last,\n      next: null,\n      value,\n    }\n    this.items[key] = item\n\n    if (++this.size === 1) {\n      this.first = item\n    } else {\n      this.last.next = item\n    }\n\n    this.last = item\n  }\n}\n"],"names":["FifoMap","constructor","max","ttlInMsecs","isNaN","Error","this","first","items","Map","last","ttl","size","clear","delete","key","has","deletedItem","get","prev","next","evict","item","expiresAt","expiry","Date","now","value","keys","set","LruMap","bumpLru","LruObject","Object","create","prototype","hasOwnProperty","call","HitStatisticsRecord","records","initForCache","cacheId","currentTimeStamp","hits","misses","expirations","resetForCache","getStatistics","getTimestamp","date","getFullYear","getMonth","toString","padStart","getDate","HitStatistics","statisticTtlInHours","globalStatisticsRecord","collectionStart","lastTimeStamp","hoursPassed","addHit","archiveIfNeeded","addMiss","addExpiration","newTimestamp","LruObjectHitStatistics","super","hitStatistics","undefined","FifoObject"],"mappings":"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"}